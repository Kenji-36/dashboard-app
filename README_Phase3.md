# Phase 3 完全版ダッシュボード

## 🎉 概要

Phase 3は、購買データ分析ダッシュボードの完全版です。高度な分析機能、RFM分析、トレンド予測、データエクスポート機能など、プロフェッショナルな機能を搭載しています。

## 📁 ファイル構成

```
ダッシュボード開発/
├── src/
│   ├── __init__.py
│   ├── app.py                  # メインアプリケーション
│   ├── config.py               # 設定ファイル
│   ├── components/
│   │   ├── __init__.py
│   │   ├── kpi_cards.py        # KPIカードコンポーネント
│   │   ├── filters.py          # フィルターコンポーネント
│   │   └── charts.py           # グラフコンポーネント（15+種類）
│   ├── utils/
│   │   ├── __init__.py
│   │   ├── data_loader.py      # データ読み込み
│   │   ├── data_processor.py   # データ処理
│   │   ├── analytics.py        # 高度な分析（RFM、統計、予測）
│   │   └── export.py           # エクスポート機能
│   └── styles/
│       └── custom.css          # カスタムCSS
├── .streamlit/
│   └── config.toml             # Streamlit設定
├── data/
│   └── sample-data.csv         # サンプルデータ
├── run_phase3.bat              # Phase 3起動スクリプト
└── README_Phase3.md            # このファイル
```

## 🚀 起動方法

### 方法1: バッチファイルで起動（推奨）

`run_phase3.bat` をダブルクリックするだけで起動できます。

### 方法2: コマンドラインから起動

```bash
# 仮想環境を使用
venv\Scripts\python.exe -m streamlit run src\app.py
```

## ✨ 主な機能

### 1. 📈 売上分析
- 月別売上推移グラフ
- 日別売上推移（エリアチャート）
- カテゴリー別売上構成（円グラフ）
- カテゴリー別ランキング（横棒グラフ）
- 地域別売上比較
- 地域×カテゴリーヒートマップ

### 2. 👥 顧客分析
- 年齢分布ヒストグラム
- 年齢層別分析（複合グラフ）
- 性別×地域別売上
- 年齢×購入金額散布図
- 購入金額分布

### 3. 💳 支払方法分析
- 支払方法別利用割合（ドーナツグラフ）
- 支払方法×カテゴリーヒートマップ
- 支払方法別統計テーブル

### 4. 🎯 RFM分析（顧客セグメンテーション）
- 顧客セグメント分布（円グラフ）
- RFM 3D散布図
- セグメント別統計
- 顧客ランク分類（VIP、優良、一般、要注意、休眠）

### 5. 📈 トレンド分析
- 売上トレンド（移動平均付き）
- 曜日別売上分析
- 月×カテゴリーヒートマップ
- 季節性分析

### 6. 📋 データテーブル
- カスタマイズ可能な列表示
- データの並び替え
- CSVエクスポート
- Excelエクスポート（複数シート）
- サマリーレポート生成

### 7. 💡 自動生成インサイト
- トップパフォーマンスの自動抽出
- ビジネス指標の自動計算
- カテゴリー別・地域別統計サマリー

## 🔍 フィルター機能

サイドバーから以下のフィルターを適用できます：

- **期間**: 日付範囲選択、クイック選択（今月、先月、直近30日、直近90日）
- **地域**: 複数選択可能
- **性別**: 複数選択可能
- **購入カテゴリー**: 複数選択可能
- **支払方法**: 複数選択可能
- **年齢範囲**: スライダーで範囲指定

## 📊 KPI指標

以下のKPIをリアルタイムで表示：

- 💰 総売上
- 👥 総顧客数
- 💳 平均購入金額
- 🛒 総取引件数
- 👤 平均年齢
- 🔄 リピート率
- 🏆 最高購入金額
- 📊 最低購入金額

## 🎨 カスタマイズ

### カラーテーマ

`.streamlit/config.toml` でカラーテーマをカスタマイズできます。

### カテゴリー別カラー

`src/config.py` の `CATEGORY_COLORS` でカテゴリーごとの色を設定できます。

### CSS

`src/styles/custom.css` でUIのスタイルをカスタマイズできます。

## 🔧 技術スタック

- **Streamlit 1.50.0**: Webダッシュボードフレームワーク
- **Pandas 2.3.3**: データ分析・操作
- **NumPy 2.3.4**: 数値計算
- **Plotly 6.4.0**: インタラクティブなグラフ作成
- **Matplotlib 3.10.7**: グラフ作成
- **Seaborn 0.13.2**: 統計的データ可視化
- **OpenPyXL 3.1.5**: Excelファイル操作

## 📈 パフォーマンス最適化

- `@st.cache_data` によるデータキャッシング
- 効率的なデータフィルタリング
- 遅延読み込み

## 🆚 Phase比較

| 機能 | Phase 1 | Phase 2 | Phase 3 |
|------|---------|---------|---------|
| KPI表示 | 4指標 | 拡張KPI | 8指標 + 比較 |
| グラフ数 | 3個 | 8個 | 15+個 |
| フィルター | なし | 基本 | 高度 + クイック選択 |
| RFM分析 | ❌ | ❌ | ✅ |
| トレンド分析 | ❌ | ❌ | ✅ |
| エクスポート | ❌ | CSV | CSV + Excel + レポート |
| インサイト | ❌ | ❌ | ✅ 自動生成 |
| カスタマイズ | ❌ | ❌ | ✅ CSS + 設定 |

## 💡 使い方のヒント

1. **フィルターを活用**: サイドバーのフィルターで特定の期間や顧客セグメントに絞り込んで分析
2. **RFM分析**: 顧客セグメントを把握し、マーケティング戦略を立案
3. **トレンド分析**: 移動平均で売上のトレンドを把握
4. **エクスポート**: 分析結果をExcelでエクスポートして共有
5. **インサイト**: 自動生成されたインサイトでビジネスの改善点を発見

## 🐛 トラブルシューティング

### データが読み込めない場合

`data/sample-data.csv` が存在することを確認してください。

### グラフが表示されない場合

ブラウザのキャッシュをクリアして再読み込みしてください。

### エラーが発生する場合

```bash
# 依存関係を再インストール
venv\Scripts\python.exe -m pip install -r requirements.txt
```

## 📝 今後の拡張案

- 機械学習による売上予測
- リアルタイムデータ更新
- ユーザー認証機能
- マルチページアプリケーション
- データベース接続
- APIエンドポイント

## 📞 サポート

問題が発生した場合は、エラーメッセージを確認し、必要に応じて開発者に連絡してください。

---

**Phase 3 完全版ダッシュボード** | Powered by Streamlit 🚀

