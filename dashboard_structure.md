# Streamlit ダッシュボード構成設計書

## データ概要
- **データソース**: sample-data.csv
- **レコード数**: 300件
- **期間**: 2023年1月～2024年12月
- **データ項目**: 顧客ID、年齢、性別、地域、購入カテゴリー、購入金額、購入日、支払方法

---

## ダッシュボード構成

### 1. ヘッダーセクション
- **タイトル**: 購買データ分析ダッシュボード
- **サブタイトル**: 顧客行動と売上の可視化
- **KPI カード（4つ横並び）**
  - 総売上金額
  - 総顧客数
  - 平均購入金額
  - 総取引件数

---

### 2. サイドバー（フィルター機能）
- **期間選択**
  - 日付範囲スライダー（開始日～終了日）
- **地域フィルター**
  - マルチセレクト（関東、関西、中部、九州）
- **性別フィルター**
  - マルチセレクト（男性、女性）
- **購入カテゴリーフィルター**
  - マルチセレクト（家電、ファッション、スポーツ、食品、書籍）
- **支払方法フィルター**
  - マルチセレクト（クレジットカード、電子マネー、現金）
- **年齢範囲フィルター**
  - スライダー（最小年齢～最大年齢）

---

### 3. メインコンテンツエリア

#### 3.1 売上分析セクション
**タブ1: 時系列分析**
- **月別売上推移グラフ**（折れ線グラフ）
  - X軸: 月、Y軸: 売上金額
  - カテゴリー別の色分け表示オプション
- **日別売上推移グラフ**（エリアチャート）
  - トレンドの可視化

**タブ2: カテゴリー分析**
- **カテゴリー別売上構成比**（円グラフ）
  - 各カテゴリーの売上割合
- **カテゴリー別売上ランキング**（横棒グラフ）
  - 売上金額の降順表示

**タブ3: 地域分析**
- **地域別売上比較**（棒グラフ）
  - 地域ごとの売上金額
- **地域×カテゴリーのヒートマップ**
  - 地域とカテゴリーの組み合わせによる売上分布

---

#### 3.2 顧客分析セクション
**タブ1: 属性分析**
- **性別×年齢層の購入金額分布**（バイオリンプロット）
  - 男性・女性別の購入金額の分布
- **年齢層別の顧客数と平均購入金額**（複合グラフ）
  - 棒グラフ: 顧客数
  - 折れ線グラフ: 平均購入金額
  - 年齢層: 10代、20代、30代、40代、50代、60代、70代

**タブ2: 購買行動分析**
- **性別×カテゴリーの購入傾向**（グループ化棒グラフ）
  - 男女別のカテゴリー購入件数
- **年齢層×カテゴリーの関係**（積み上げ棒グラフ）
  - 年齢層ごとの購入カテゴリー分布

**タブ3: RFM分析風の可視化**
- **購入金額の分布**（ヒストグラム）
  - 購入金額の度数分布
- **顧客セグメント分析**（散布図）
  - X軸: 年齢、Y軸: 購入金額
  - 色: 性別、サイズ: 購入回数（同一顧客の複数購入を想定）

---

#### 3.3 支払方法分析セクション
- **支払方法別の利用割合**（ドーナツグラフ）
  - クレジットカード、電子マネー、現金の比率
- **支払方法×カテゴリーのクロス集計**（ヒートマップ）
  - 各カテゴリーでどの支払方法が多いか
- **支払方法×年齢層の関係**（積み上げ棒グラフ）
  - 年齢層ごとの支払方法の傾向

---

#### 3.4 詳細データテーブルセクション
- **フィルター適用後のデータ表示**
  - インタラクティブなデータテーブル
  - ソート機能付き
  - ページネーション
- **データエクスポート機能**
  - CSVダウンロードボタン
  - Excelダウンロードボタン

---

#### 3.5 統計サマリーセクション
**2カラムレイアウト**

**左カラム: カテゴリー別統計**
- カテゴリーごとの以下の指標をテーブル表示
  - 購入件数
  - 総売上金額
  - 平均購入金額
  - 最高購入金額
  - 最低購入金額

**右カラム: 地域別統計**
- 地域ごとの以下の指標をテーブル表示
  - 購入件数
  - 総売上金額
  - 平均購入金額
  - 顧客数

---

#### 3.6 インサイト・発見セクション
- **自動生成されるインサイト**（テキストボックス）
  - 最も売上が高いカテゴリー
  - 最も購入金額が高い年齢層
  - 最も利用されている支払方法
  - 売上が最も高い月
  - 地域別の特徴的な傾向

---

### 4. フッターセクション
- データ更新日時
- データ件数（フィルター適用後）
- ダッシュボード作成情報

---

## 推奨される可視化ライブラリ
- **Plotly**: インタラクティブなグラフ（折れ線、棒、円、散布図など）
- **Seaborn**: ヒートマップ、バイオリンプロット
- **Matplotlib**: 基本的なグラフ補完

---

## UI/UXの工夫ポイント

### カラースキーム
- **メインカラー**: ブルー系（信頼感、ビジネス向け）
- **アクセントカラー**: オレンジ系（重要な指標の強調）
- **カテゴリー別カラーパレット**: 
  - 家電: 青
  - ファッション: ピンク
  - スポーツ: 緑
  - 食品: オレンジ
  - 書籍: 紫

### レイアウト
- **レスポンシブデザイン**: カラムを活用した見やすい配置
- **スペーシング**: 適切な余白で視認性向上
- **エキスパンダー**: 詳細情報は折りたたみ可能に

### インタラクティブ要素
- **ホバー情報**: グラフ上でマウスオーバー時に詳細表示
- **ドリルダウン**: クリックで詳細データへ遷移
- **リアルタイム更新**: フィルター変更時に即座にグラフ更新

---

## 実装の優先順位

### Phase 1（MVP: 最小限の機能）
1. データ読み込みとKPI表示
2. 基本的なフィルター機能（サイドバー）
3. 月別売上推移グラフ
4. カテゴリー別売上円グラフ
5. データテーブル表示

### Phase 2（拡張機能）
1. 地域分析セクション
2. 顧客属性分析
3. 支払方法分析
4. 統計サマリー

### Phase 3（高度な機能）
1. ヒートマップ
2. 複合グラフ
3. インサイト自動生成
4. データエクスポート機能

---

## 技術的な考慮事項

### パフォーマンス
- `@st.cache_data`を使用してデータ読み込みをキャッシュ
- フィルター処理の最適化

### データ処理
- Pandasでの効率的なデータ集計
- 日付データの適切な変換（datetime型）
- 年齢層のカテゴリー化

### エラーハンドリング
- データ欠損値の処理
- フィルター適用後のデータ0件の場合の表示

---

## 期待される分析結果の例

### 想定されるビジネスインサイト
- 家電カテ�ゴリーが最も高額購入される傾向
- 60代以上の顧客が高額購入する傾向
- 電子マネーとクレジットカードの利用が多い
- 地域による購買傾向の違い
- 季節性のある購買パターン

---

このダッシュボード構成により、データを多角的に分析し、ビジネス上の意思決定に役立つインサイトを得ることができます。

